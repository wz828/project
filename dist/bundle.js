!function(t){var i={};function e(r){if(i[r])return i[r].exports;var a=i[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)e.d(r,a,function(i){return t[i]}.bind(null,a));return r},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=2)}([function(t,i){var e=document.getElementById("canvas1"),r=e.getContext("2d"),a=document.getElementById("canvas2"),n=a.getContext("2d"),s={imgUrl:"./images/",can1:e,ctx1:r,can2:a,ctx2:n,canWid:e.width,canHei:e.height,mx:.5*e.width,my:.5*e.height,aneOb:{},fruitOb:{},momOb:{},babyOb:{},scoreOb:{},waveOb:{},haloOb:{},dustOb:{},diffframetime:0};t.exports=s},function(t,i){window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,i){return window.setTimeout(t,1e3/60)};var e={calLength2:function(t,i,e,r){return Math.sqrt(Math.pow(t-e,2)+Math.pow(i-r,2))},lerpAngle:function(t,i,e){var r=i-t;return r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI),t+r*e},lerpDistance:function(t,i,e){return t+(i-t)*e},distance:function(t,i,e,r,a){var n=Math.abs(t-e),s=Math.abs(i-r);return n<a&&s<a}};t.exports=e},function(t,i,e){e(12),e(3).startgame()},function(t,i,e){var r,a,n,s,o,h,m,u,d,y=e(0),f=e(1),b=e(4),l=e(5),c=e(6),x=e(7),p=e(8),g=e(9),v=e(10),w=e(11),I=y.can1,T=y.ctx1,E=y.ctx2,O=y.canWid,A=y.canHei,M=f.calLength2,B={startgame:function(){B.init(),d=Date.now(),B.gameLoop()},drawBackgorund:function(){var t=new Image;t.src=y.imgUrl+"background.jpg",E.drawImage(t,0,0,O,A)},init:function(){T.fillStyle="white",T.font="20px 微软雅黑",T.textAlign="center",I.addEventListener("mousemove",B.onMouseMove,!1),I.addEventListener("click",B.onClick,!1),y.mx=.5*O,y.my=.5*A,(r=y.aneOb=new b).init(),(a=y.fruitOb=new x).init(),(n=y.momOb=new g).init(),(s=y.babyOb=new l).init(),o=y.scoreOb=new v,(h=y.waveOb=new w).init(),(m=y.haloOb=new p).init(),(u=y.dustOb=new c).init()},gameLoop:function(){requestAnimFrame(B.gameLoop);var t=Date.now();y.diffframetime=t-d,d=t,40<y.diffframetime&&(y.diffframetime=40),E.clearRect(0,0,O,A),B.drawBackgorund(),r.drawAne(),a.computeFruit(),a.drawFruit(),T.clearRect(0,0,O,A),n.drawMom(),s.drawBaby(),o.gameOver||(B.momEatFruit(),B.momFoodBaby()),o.drawScore(),h.drawWave(),m.drawHalo(),u.drawDust()},onMouseMove:function(t){o.gameOver||(t.offsetX||t.layerX)&&(y.mx=null==t.offsetX?t.layerX:t.offsetX,y.my=null==t.offsetY?t.layerY:t.offsetY)},onClick:function(){o.gameOver&&(o.gameOver=!1,a.init(),n.init(),s.init(),o.init())},momEatFruit:function(){for(var t=0;t<a.num;t++)a.alive[t]&&a.grow[t]&&M(a.x[t],a.y[t],n.x,n.y)<30&&(a.dead(t),h.born(t),o.fruitNum++,n.momBodyIndex=7==n.momBodyIndex?n.momBodyIndex:n.momBodyIndex+1,"blue"==a.type[t]&&o.doubleNum++)},momFoodBaby:function(){if(0<o.fruitNum&&M(n.x,n.y,s.x,s.y)<30){m.born(),n.momBodyIndex=0;var t=o.doubleNum*o.fruitNum,i=s.babyBodyIndex-t;i<0&&(i=0);var e=o.strength+(i/2).toFixed(0);10<e&&(e=10),o.strength=e,s.babyBodyIndex=i,o.computeScore()}}};t.exports=B},function(t,i,e){var r=e(0),a=r.ctx2,n=r.canHei,s=function(){this.num=50,this.rootx=[],this.headx=[],this.heady=[],this.amp=[],this.beta=0};s.prototype.init=function(){for(var t=0;t<this.num;t++)this.rootx[t]=18*t+30*Math.random(),this.headx[t]=this.rootx[t],this.heady[t]=n-220+50*Math.random(),this.amp[t]=50*Math.random()+60},s.prototype.drawAne=function(){this.beta+=8e-4*r.diffframetime;var t=Math.sin(this.beta);a.save(),a.globalAlpha=.7,a.lineWidth=20,a.lineCap="round",a.strokeStyle="#3b154e";for(var i=0;i<this.num;i++){var e=this.headx[i]+t*this.amp[i];a.beginPath(),a.moveTo(this.rootx[i],n),a.quadraticCurveTo(this.rootx[i],n-100,e,this.heady[i]),a.stroke()}a.restore()},t.exports=s},function(t,i,e){var r=e(0),a=e(1),n=r.imgUrl,s=r.ctx1,o=r.can1,h=r.canWid,m=r.canHei,u=a.lerpAngle,d=a.lerpDistance,y=function(){this.x=0,this.y=0,this.angle,this.babyTailArr=[],this.babyTailTimer=0,this.babyTailIndex=0,this.babyEyeArr=[],this.babyEyeTimer=0,this.babyEyeIndex=0,this.babyEyeInterval=1e3,this.babyBodyArr=[],this.babyBodyTimer=0,this.babyBodyIndex=0};y.prototype.init=function(){this.x=.5*h-50,this.y=.5*m+50,this.babyBodyIndex=0;for(var t=this.angle=0;t<8;t++)this.babyTailArr[t]=new Image,this.babyTailArr[t].src=n+"babyTail"+t+".png";for(t=0;t<2;t++)this.babyEyeArr[t]=new Image,this.babyEyeArr[t].src=n+"babyEye"+t+".png";for(t=0;t<20;t++)this.babyBodyArr[t]=new Image,this.babyBodyArr[t].src=n+"babyFade"+t+".png"},y.prototype.drawBaby=function(){var t=r.momOb,i=r.scoreOb;this.x=d(t.x,this.x,.98),this.y=d(t.y,this.y,.99);var e=t.x-this.x,a=t.y-this.y,n=Math.atan2(a,e)+Math.PI;this.angle=u(n,this.angle,.6),this.babyTailTimer+=r.diffframetime,50<this.babyTailTimer&&(this.babyTailIndex=(this.babyTailIndex+1)%8,this.babyTailTimer%=50),this.babyEyeTimer+=r.diffframetime,this.babyEyeTimer>this.babyEyeInterval&&(this.babyEyeIndex=(this.babyEyeIndex+1)%2,this.babyEyeTimer%=this.babyEyeInterval,0==this.babyEyeIndex?this.babyEyeInterval=1500*Math.random()+1500:this.babyEyeInterval=200),this.babyBodyTimer+=r.diffframetime,550<this.babyBodyTimer&&(this.babyBodyIndex+=1,this.babyBodyTimer%=550,i.strength=((20-this.babyBodyIndex)/2).toFixed(0),19<this.babyBodyIndex&&(this.babyBodyIndex=19,i.gameOver=!0,o.style.cursor="pointer")),s.save(),s.translate(this.x,this.y),s.rotate(this.angle);var h=this.babyTailArr[this.babyTailIndex];s.drawImage(h,.5*-h.width+24,.5*-h.height);var m=this.babyBodyArr[this.babyBodyIndex];s.drawImage(m,.5*-m.width,.5*-m.height);var y=this.babyEyeArr[this.babyEyeIndex];s.drawImage(y,.5*-y.width,.5*-y.height),s.restore()},t.exports=y},function(t,i,e){var r=e(0),a=r.ctx1,n=r.imgUrl,s=r.canWid,o=r.canHei,h=function(){this.num=30,this.dustPic=[],this.x=[],this.y=[],this.amp=[],this.index=[],this.beta=0};h.prototype.init=function(){for(var t=0;t<7;t++)this.dustPic[t]=new Image,this.dustPic[t].src=n+"dust"+t+".png";for(t=0;t<this.num;t++)this.x[t]=Math.random()*s,this.y[t]=Math.random()*o,this.amp=20+Math.random()+15,this.index[t]=Math.floor(7*Math.random())},h.prototype.drawDust=function(){for(var t=0;t<this.num;t++){var i=this.index[t];a.drawImage(this.dustPic[i],this.x,this.y)}},t.exports=h},function(t,i,e){var r=e(0),a=r.ctx2,n=r.imgUrl,s=function(){this.num=30,this.x=[],this.y=[],this.size=[],this.type=[],this.speed=[],this.grow=[],this.alive=[],this.orange=new Image,this.blue=new Image};s.prototype.init=function(){this.orange.src=n+"fruit.png",this.blue.src=n+"blue.png";for(var t=0;t<this.num;t++)this.x[t]=this.y[t]=0,this.speed[t]=.015*Math.random()+.005,this.alive[t]=!1,this.grow[t]=!1,this.type[t]=""},s.prototype.drawFruit=function(){for(var t=0;t<this.num;t++)if(this.alive[t]){this.size[t]<=16?(this.grow[t]=!1,this.size[t]+=this.speed[t]*r.diffframetime*.8):(this.grow[t]=!0,this.y[t]-=5*this.speed[t]*r.diffframetime);var i=this.orange;"blue"==this.type[t]&&(i=this.blue),a.drawImage(i,this.x[t]-.5*this.size[t],this.y[t]-.5*this.size[t],this.size[t],this.size[t]),this.y[t]<8&&(this.alive[t]=!1)}},s.prototype.born=function(t){var i=r.aneOb,e=Math.floor(Math.random()*i.num);this.x[t]=i.headx[e],this.y[t]=i.heady[e],this.size[t]=0,this.alive[t]=!0;var a=Math.random();this.type[t]=a<.1?"blue":"orange"},s.prototype.dead=function(t){this.alive[t]=!1},s.prototype.computeFruit=function(){for(var t=r.fruitOb,i=0,e=0;e<t.num;e++)t.alive[e]&&i++;if(i<15)return function(){for(var t=r.fruitOb,i=0;i<t.num;i++)if(!t.alive[i])return t.born(i)}(),!1},t.exports=s},function(t,i,e){var r=e(0),a=r.ctx1,n=r.canWid,s=r.canHei,o=function(){this.num=5,this.x=[],this.y=[],this.r=[],this.status=[]};o.prototype.init=function(){for(var t=0;t<this.num;t++)this.x[t]=.5*n,this.y[t]=.5*s,this.status[t]=!1,this.r[t]=0},o.prototype.drawHalo=function(){a.save(),a.lineWidth=4;for(var t=0;t<this.num;t++)if(this.status[t]){if(this.r[t]+=.08*r.diffframetime,100<this.r[t])return this.status[t]=!1;var i=1-this.r[t]/100;a.strokeStyle="rgba(203, 91, 0, "+i+")",a.beginPath(),a.arc(this.x[t],this.y[t],this.r[t],0,2*Math.PI),a.stroke()}a.restore()},o.prototype.born=function(){for(var t=r.babyOb,i=0;i<this.num;i++)if(!this.status[i])return this.status[i]=!0,this.x[i]=t.x,this.y[i]=t.y,!(this.r[i]=10)},t.exports=o},function(t,i,e){var r=e(0),a=e(1),n=r.ctx1,s=r.imgUrl,o=r.canWid,h=r.canHei,m=a.lerpAngle,u=a.lerpDistance,d=function(){this.x=0,this.y=0,this.angle,this.momTailArr=[],this.momTailTimer=0,this.momTailIndex=0,this.momEyeArr=[],this.momEyeTimer=0,this.momEyeIndex=0,this.momEyeInterval=1e3,this.momOrangeArr=[],this.momBlueArr=[],this.momBodyIndex=0};d.prototype.init=function(){this.x=.5*o,this.y=.5*h;for(var t=this.angle=0;t<8;t++)this.momTailArr[t]=new Image,this.momTailArr[t].src=s+"bigTail"+t+".png";for(t=0;t<2;t++)this.momEyeArr[t]=new Image,this.momEyeArr[t].src=s+"bigEye"+t+".png";for(t=0;t<8;t++)this.momOrangeArr[t]=new Image,this.momOrangeArr[t].src=s+"bigSwim"+t+".png",this.momBlueArr[t]=new Image,this.momBlueArr[t].src=s+"bigSwimBlue"+t+".png"},d.prototype.drawMom=function(){var t=r.scoreOb;this.x=u(r.mx,this.x,.96),this.y=u(r.my,this.y,.98);var i=r.mx-this.x,e=r.my-this.y,a=Math.atan2(e,i)+Math.PI;this.angle=m(a,this.angle,.6),this.momTailTimer+=r.diffframetime,50<this.momTailTimer&&(this.momTailIndex=(this.momTailIndex+1)%8,this.momTailTimer%=50),this.momEyeTimer+=r.diffframetime,this.momEyeTimer>this.momEyeInterval&&(this.momEyeIndex=(this.momEyeIndex+1)%2,this.momEyeTimer%=this.momEyeInterval,0==this.momEyeIndex?this.momEyeInterval=1500*Math.random()+1500:this.momEyeInterval=200),n.save(),n.translate(this.x,this.y),n.rotate(this.angle);var s,o=this.momTailArr[this.momTailIndex];n.drawImage(o,.5*-o.width+30,.5*-o.height),s=1!=t.doubleNum?this.momBlueArr[this.momBodyIndex]:this.momOrangeArr[this.momBodyIndex],n.drawImage(s,.5*-s.width,.5*-s.height);var h=this.momEyeArr[this.momEyeIndex];n.drawImage(h,.5*-h.width,.5*-h.height),n.restore()},t.exports=d},function(t,i,e){var r=e(0),a=r.ctx1,n=r.canWid,s=r.canHei,o=function(){this.fruitNum=0,this.doubleNum=1,this.score=0,this.strength=10,this.alpha=0,this.gameOver=!1};o.prototype.init=function(){this.fruitNum=0,this.doubleNum=1,this.score=0},o.prototype.drawScore=function(){var t=r.scoreOb;a.fillText("num: "+this.fruitNum,.5*n,s-30),a.fillText("double: "+this.doubleNum,.5*n,s-70),a.save(),a.font="30px verdana",a.fillText("SCORE: "+this.score,.5*n,50),a.font="20px verdana",a.fillText("strength: ",650,45),t.strength<=3&&(a.fillStyle="red"),a.fillText(t.strength,710,45),t.gameOver&&(this.alpha+=5e-4*r.diffframetime,1<this.alpha&&(this.alpha=1),a.font="40px verdana",a.shadowBlur=10,a.shadowColor="white",a.fillStyle="rgba(255, 255, 255, "+this.alpha+")",a.fillText("GAME OVER",.5*n,.5*s-25),a.save(),a.font="25px verdana",a.fillText("CLICK TO RESTART",.5*n,.5*s+25),a.restore()),a.restore()},o.prototype.computeScore=function(){var t=r.scoreOb;t.score+=t.fruitNum*t.doubleNum,this.fruitNum=0,this.doubleNum=1},t.exports=o},function(t,i,e){var r=e(0),a=r.ctx1,n=r.canWid,s=r.canHei,o=function(){this.num=10,this.x=[],this.y=[],this.r=[],this.status=[]};o.prototype.init=function(){for(var t=0;t<this.num;t++)this.x[t]=.5*n,this.y[t]=.5*s,this.status[t]=!1,this.r[t]=0},o.prototype.drawWave=function(){a.save(),a.lineWidth=3;for(var t=0;t<this.num;t++)if(this.status[t]){if(this.r[t]+=.04*r.diffframetime,60<this.r[t])return this.status[t]=!1;var i=1-this.r[t]/60;a.strokeStyle="rgba(255, 255, 255, "+i+")",a.beginPath(),a.arc(this.x[t],this.y[t],this.r[t],0,2*Math.PI),a.stroke()}a.restore()},o.prototype.born=function(t){for(var i=r.fruitOb,e=0;e<this.num;e++)if(!this.status[e])return this.status[e]=!0,this.x[e]=i.x[t],this.y[e]=i.y[t],!(this.r[e]=10)},t.exports=o},function(t,i){}]);